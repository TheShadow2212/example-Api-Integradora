import{a as E}from"./chunk-MDZVPZML.js";import{a as j}from"./chunk-O6JP5ZWK.js";import"./chunk-YVGBJIAI.js";import"./chunk-6K4NBGSG.js";import{a as U}from"./chunk-VEZDZCEF.js";import{r as T}from"./chunk-GJWLTGAK.js";import"./chunk-KGX3I5MG.js";import{a as R,c as H,d as l,f as F}from"./chunk-P4DI4OJ4.js";import{Ab as P,Fa as f,Ha as v,Ja as r,Ka as c,La as p,Oa as A,Pa as y,Qa as C,S as _,Ua as x,V as m,W as h,Z as S,ab as w,e as b,ga as d,ja as I,sb as M,ua as u,va as g,yb as k,zb as O}from"./chunk-YH6CFDQH.js";var L=(t,n)=>{let a=localStorage.getItem("token"),o=localStorage.getItem("role_id"),e=t.headers;return a&&(e=e.set("Authorization","Bearer "+a)),o&&(e=e.set("Role-Id",o)),e=e.set("Accept","application/json"),t=t.clone({headers:e}),n(t)};var i=(()=>{let n=class n{constructor(o,e){this.loginService=o,this.router=e}canActivate(o,e){return b(this,null,function*(){try{return yield this.loginService.isAuth().toPromise()}catch{return this.router.createUrlTree(["/login"])}})}};n.\u0275fac=function(e){return new(e||n)(d(j),d(l))},n.\u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var V=[{path:"login",loadComponent:()=>import("./chunk-WK4IO2XG.js").then(t=>t.LoginComponent)},{path:"register",loadComponent:()=>import("./chunk-5AESKCGN.js").then(t=>t.RegisterUserComponent)},{path:"home",loadComponent:()=>import("./chunk-TJWNGEEN.js").then(t=>t.HubComponent),canActivate:[i]},{path:"habitaciones",loadComponent:()=>import("./chunk-EVGVL3EP.js").then(t=>t.HabitacionesComponent),canActivate:[i]},{path:"habitaciones/habitacion/:id",loadComponent:()=>import("./chunk-X5XGDRI6.js").then(t=>t.HabitacionComponent),canActivate:[i]},{path:"habitacion/create",loadComponent:()=>import("./chunk-UVYZOKQM.js").then(t=>t.HabitacionesCreateFormComponent),canActivate:[i]},{path:"habitacion/update/:id",loadComponent:()=>import("./chunk-R7QARAVN.js").then(t=>t.HabitacionesUpdateFormComponent),canActivate:[i]},{path:"historial/:nombre/:id",loadComponent:()=>import("./chunk-35MJR4QZ.js").then(t=>t.HistorialComponent),canActivate:[i]},{path:"users",loadComponent:()=>import("./chunk-Z7R67J46.js").then(t=>t.HomeComponent),canActivate:[i]},{path:"user",loadComponent:()=>import("./chunk-I4KURNOV.js").then(t=>t.UserComponent),canActivate:[i]},{path:"usuarios/update/:id",loadComponent:()=>import("./chunk-NMMKQHVT.js").then(t=>t.UsuarioUpdateFormComponent),canActivate:[i]},{path:"",redirectTo:"/home",pathMatch:"full"}];var N={providers:[F(V),I(P),k(O([L]))]};function G(t,n){if(t&1){let a=A();r(0,"div",7)(1,"app-dashboard",8),y("logoutEvent",function(){m(a);let e=C();return h(e.logout())})("rol",function(){m(a);let e=C();return h(e.ngOnInit())}),c()()}}function J(t,n){t&1&&(r(0,"div",9),p(1,"img",10),r(2,"p",11),x(3,"Room Guardian"),c()())}var z=(()=>{let n=class n{constructor(o,e){this.router=o,this.crud=e,this.title="pagina-practica",this.authMessage="",this.authStatus=!1,this.crud.loginSuccessful.subscribe(()=>{console.log("login successful"),this.ngOnInit()})}logout(){this.crud.logout().subscribe(o=>{localStorage.clear(),this.router.navigate(["/login"]),this.ngOnInit()},o=>{console.error("Error al cerrar sesi\xF3n",o)})}isNotLoginPage(){return this.router.url!=="/login"&&this.router.url!=="/register"}ngOnInit(){let o=localStorage.getItem("role_id"),e=localStorage.getItem("token");o&&o!=="null"?(o==="3"||o==="2"||o==="1")&&e&&e!==null?(this.authMessage="Usuario autenticado",this.authStatus=!0):(this.authMessage="Rol no definido",this.authStatus=!1,this.router.navigate(["/login"])):(this.authMessage="Rol no definido",this.authStatus=!1,this.router.navigate(["/login"])),localStorage.setItem("auth",this.authStatus.toString()),console.log(this.authStatus),console.log(this.authMessage)}navigateTo(o){this.router.navigate([o.toLowerCase()])}};n.\u0275fac=function(e){return new(e||n)(g(l),g(U))},n.\u0275cmp=_({type:n,selectors:[["app-root"]],standalone:!0,features:[w],decls:8,vars:2,consts:[["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap","rel","stylesheet"],[1,"container"],["class","dashboard-container2",4,"ngIf"],[1,"menu-container"],["class","dashboard-container1",4,"ngIf"],[1,"dashboard-container2"],[3,"logoutEvent","rol"],[1,"dashboard-container1"],["draggable","false","src","../assets/the-server-4.png","alt","Imagen representativa del logo de la empresa",1,"img-icon"],[1,"open-sans-400"]],template:function(e,s){e&1&&(p(0,"link",0)(1,"link",1)(2,"link",2),r(3,"div",3),f(4,G,2,0,"div",4),r(5,"div",5),f(6,J,4,0,"div",6),p(7,"router-outlet"),c()()),e&2&&(u(4),v("ngIf",s.isNotLoginPage()),u(2),v("ngIf",s.isNotLoginPage()))},dependencies:[H,T,E,M],styles:['.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100vh;width:100%}.dashboard-container2[_ngcontent-%COMP%]{height:100%}.dashboard-container1[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:8.5%;background-color:#fff}.open-sans-400[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-optical-sizing:auto;font-weight:400;pointer-events:none;font-size:30px;color:#2fa9df;font-style:normal;margin-right:3%;font-variation-settings:"wdth" 100}.img-icon[_ngcontent-%COMP%]{width:50px;height:50px}.menu-container[_ngcontent-%COMP%]{width:100%}']});let t=n;return t})();R(z,N).catch(t=>console.error(t));
